---
#------------------------------------------------------------------------------
#
# Set lookup merge behaviour
#
#------------------------------------------------------------------------------
lookup_options:
  "^ora_profile::database::(.*)::(.*)":
    merge:
      strategy: deep
      merge_hash_arrays: true
  ora_profile::database::asm_diskgroup::disks:
    merge:
      strategy: first

ora_profile::database::source:                                   /vagrant/software
ora_profile::database::ora_inventory_dir:                        /u01/app
ora_profile::database::db_definition::system_password:           Welcome01
ora_profile::database::db_definition::sys_password:              Change_on_1nstall
ora_profile::database::db_startup::db_type:                      grid
ora_profile::database::db_control_provider:                      srvctl
ora_profile::database::storage:                                  asm
ora_profile::database::db_listener:                              skip


# ------------------------------------------------------------------------------
#
# Settings for database::sysctl
#
# ------------------------------------------------------------------------------
ora_profile::database::sysctl::list:
  'fs.file-max':
    value:  6815744
  'fs.aio-max-nr':
    value:  1048576
  'net.ipv4.ip_local_port_range':
    value:  '9000 65500'
  'net.core.rmem_default':
    value:  262144
  'net.core.rmem_max':
    value:  4194304
  'net.core.wmem_default':
    value:  262144
  'net.core.wmem_max':
    value:  1048576
  'vm.swappiness':
    value: 1
  'vm.dirty_background_ratio':
    value: 3
  'vm.dirty_ratio':
    value: 80
  'vm.dirty_expire_centisecs':
    value: 500
  'vm.dirty_writeback_centisecs':
    value: 100
  # # On Oracle Linux defaults
  # 'kernel.sem':
  #   value:  '32000      1024000000      500     32000'
  # 'kernel.shmall':
  #   value:  18446744073692774399
  # 'kernel.shmmax':
  #   value:  18446744073692774399
  # 'kernel.panic_on_oops':
  #   value:  1

# ------------------------------------------------------------------------------
#
# Settings for database::limits
#
# ------------------------------------------------------------------------------
ora_profile::database::limits::list:
  '*/nofile':
    soft: 2048
    hard: 65536
  '*/stack':
    soft: 10240

# ------------------------------------------------------------------------------
#
# Settings for database::asm_packages
#
# ------------------------------------------------------------------------------
ora_profile::database::asm_packages::list:
  nfs-utils: {}
  cvuqdisk:
    ensure:   installed
    source:   "/vagrant/software/cvuqdisk-1.0.10-1.rpm"
    provider: rpm
    require:
      - Package[smartmontools]
      - Package[nfs-utils]
      - Group[%{::ora_profile::database::install_group}]


# ------------------------------------------------------------------------------
#
#  Settings for database::firewall
#
# ------------------------------------------------------------------------------
ora_profile::database::firewall::ports:
  '300 Allow SQLNET on port 1521':
    port: 1521
  '301 Allow Enterprise Manager on port 3782':
    port: 3872
  '302 Allow Multicast Domain Name Service (udp) for gpnpd':
    port: 5353
    protocol: udp
  '303 Allow Multicast Domain Name Service (tcp) for gpnpd':
    port: 5353
    protocol: tcp
  '304 Allow Cluster Synchronization Service daemon (CSSD)':
    port: 42414
    protocol: udp
  '305 Allow Oracle Grid Interprocess Communication for gipcd and ohasd':
    port: 42424
    protocol: udp
  '306 Allow Oracle Notification Services (ONS) local':
    port: 6100
  '307 Allow Oracle Notification Services (ONS) remote':
    port: 6200


# # Pre-ora_profile yaml data:

# profile::download_dir:                                    /data/install
# profile::source_dir:                                      puppet:///modules/software
# profile::oradb::grid_user:                                grid
# profile::oradb::grid_group:                               oinstall
# profile::oradb::grid_admin_group:                         asmadmin
# profile::oradb::asm_sys_password:                         Welcome01
# profile::oradb::grid_base:                                /u01/app/grid/admin
# profile::oradb::ora_inventory_dir:                        /u01/app

# # pre-ora_profile yaml variables

# # ora_rac::settings::puppet_download_mnt_point: /vagrant/software
# ora_rac::params::domain_name:                 "%{lookup('domain_name')}"
# ora_rac::settings::oracle_user_password:      '$1$0buP/zGF$7uAWzPQaotbvmATC29gl.1'
# ora_rac::settings::grid_user_password:        '$1$0buP/zGF$7uAWzPQaotbvmATC29gl.1'
# ora_rac::settings::oracle_base:               /u01/oracle
# ora_rac::settings::oracle_home:               /u01/oracle/product/12.2.0/db
# ora_rac::settings::grid_base:                 /u01/grid
# ora_rac::settings::grid_home:                 /u01/12.2.0/grid
# ora_rac::settings::version:                   '12.2.0.1'
# ora_rac::settings::grid_file:                 'linuxx64_12201_grid_home'
# ora_rac::settings::oracle_file:               'linuxx64_12201_database'
# ora_rac::settings::download_dir:              /opt/install
# ora_rac::settings::ora_inventory_dir:         /u01/oracle
# ora_rac::user_equivalence::ssh_module:        '::ssh'

# ssh::sshd_config_hostkey:
#   - /etc/ssh/ssh_host_rsa_key
#   - /etc/ssh/ssh_host_ecdsa_key
#   - /etc/ssh/ssh_host_ed25519_key

# ssh::users:
#   grid:
#     allow: [ 'grid', 'oracle' ]
#   oracle:
#     allow: [ 'grid', 'oracle' ]

# ssh::keys::grid:
#   type: 'ssh-rsa'
#   public_key: 'AAAAB3NzaC1yc2EAAAABIwAAAQEApFD0jSgdlxNDctN6edocSaMNPTiOgw7mwtws1VdZKcMrhAwCsjLnCBv5nW1ZTEJHrFhGrwNJn+uwFoBV+vM3SBOoH0gdy44tAIJYacD39G83lkr7Z1A/fIARLLFEWdrR870FUpU/b1VTaUSyG6Wa32O9H7JGUen1xzTlV2rSFOrpAMM0KLzzvGc8JMWyHEwOrchmxmNFbJOZdcy+BVgxQt/alilC05y9qPIGkWLWItl+sLG6kjyYH9axd0bOgmV6JzLFLleEjxqWN8Aim/QnL3sHqPbuf/bGErGQhhG1J+9weHay/G6lEjgGlC63gOxWO/TsXOZYqO6z7H8Uwgg+ZQ=='

# ssh::keys::oracle:
#   type: 'ssh-rsa'
#   public_key: 'AAAAB3NzaC1yc2EAAAABIwAAAQEAq1hhJJQu4NC9LxEz/lWczzC2cQUJZNt+Cgj5RAteGG2Me1sN2hQI7mMWu/vVWYXpG5pgOVyv3IPkApfC5tXqHcygvWhKbyvo3mWn2I9wvSL4f2gsv/RKgdP50lfgNxOemrIfrz08A16AloHcYS/titxZkJGNqkzg6XrM3EslzRvMWXFut1ACYzj8YQwLtzzmJJUrn0/YnEctA/6Jrl5U+kUlt/kpO6WxHoPxGruAnFGnNTM2WobUSpculzuT3qwAfQXayK6v4/SwPzmye4/4F08dgEO1z6aAp1kLSkQnib+O3WkmluDyKtRmhrpZDjZf1bsZ5OKidSmiEDUa+N9dKQ=='

# ssh::keys:
#   grid_for_grid:
#     ensure: present
#     user: grid
#     type: rsa
#     key: 'AAAAB3NzaC1yc2EAAAABIwAAAQEApFD0jSgdlxNDctN6edocSaMNPTiOgw7mwtws1VdZKcMrhAwCsjLnCBv5nW1ZTEJHrFhGrwNJn+uwFoBV+vM3SBOoH0gdy44tAIJYacD39G83lkr7Z1A/fIARLLFEWdrR870FUpU/b1VTaUSyG6Wa32O9H7JGUen1xzTlV2rSFOrpAMM0KLzzvGc8JMWyHEwOrchmxmNFbJOZdcy+BVgxQt/alilC05y9qPIGkWLWItl+sLG6kjyYH9axd0bOgmV6JzLFLleEjxqWN8Aim/QnL3sHqPbuf/bGErGQhhG1J+9weHay/G6lEjgGlC63gOxWO/TsXOZYqO6z7H8Uwgg+ZQ=='
#   oracle_for_grid:
#     ensure: present
#     user: grid
#     type: rsa
#     key: 'AAAAB3NzaC1yc2EAAAABIwAAAQEAq1hhJJQu4NC9LxEz/lWczzC2cQUJZNt+Cgj5RAteGG2Me1sN2hQI7mMWu/vVWYXpG5pgOVyv3IPkApfC5tXqHcygvWhKbyvo3mWn2I9wvSL4f2gsv/RKgdP50lfgNxOemrIfrz08A16AloHcYS/titxZkJGNqkzg6XrM3EslzRvMWXFut1ACYzj8YQwLtzzmJJUrn0/YnEctA/6Jrl5U+kUlt/kpO6WxHoPxGruAnFGnNTM2WobUSpculzuT3qwAfQXayK6v4/SwPzmye4/4F08dgEO1z6aAp1kLSkQnib+O3WkmluDyKtRmhrpZDjZf1bsZ5OKidSmiEDUa+N9dKQ=='
#   oracle_for_oracle:
#     ensure: present
#     user: oracle
#     type: rsa
#     key: 'AAAAB3NzaC1yc2EAAAABIwAAAQEAq1hhJJQu4NC9LxEz/lWczzC2cQUJZNt+Cgj5RAteGG2Me1sN2hQI7mMWu/vVWYXpG5pgOVyv3IPkApfC5tXqHcygvWhKbyvo3mWn2I9wvSL4f2gsv/RKgdP50lfgNxOemrIfrz08A16AloHcYS/titxZkJGNqkzg6XrM3EslzRvMWXFut1ACYzj8YQwLtzzmJJUrn0/YnEctA/6Jrl5U+kUlt/kpO6WxHoPxGruAnFGnNTM2WobUSpculzuT3qwAfQXayK6v4/SwPzmye4/4F08dgEO1z6aAp1kLSkQnib+O3WkmluDyKtRmhrpZDjZf1bsZ5OKidSmiEDUa+N9dKQ=='
#   grid_for_oracle:
#     ensure: present
#     user: oracle
#     type: rsa
#     key: 'AAAAB3NzaC1yc2EAAAABIwAAAQEApFD0jSgdlxNDctN6edocSaMNPTiOgw7mwtws1VdZKcMrhAwCsjLnCBv5nW1ZTEJHrFhGrwNJn+uwFoBV+vM3SBOoH0gdy44tAIJYacD39G83lkr7Z1A/fIARLLFEWdrR870FUpU/b1VTaUSyG6Wa32O9H7JGUen1xzTlV2rSFOrpAMM0KLzzvGc8JMWyHEwOrchmxmNFbJOZdcy+BVgxQt/alilC05y9qPIGkWLWItl+sLG6kjyYH9axd0bOgmV6JzLFLleEjxqWN8Aim/QnL3sHqPbuf/bGErGQhhG1J+9weHay/G6lEjgGlC63gOxWO/TsXOZYqO6z7H8Uwgg+ZQ=='


# ora_rac::params::grid_private_key: |
#   -----BEGIN RSA PRIVATE KEY-----
#   MIIEoAIBAAKCAQEApFD0jSgdlxNDctN6edocSaMNPTiOgw7mwtws1VdZKcMrhAwC
#   sjLnCBv5nW1ZTEJHrFhGrwNJn+uwFoBV+vM3SBOoH0gdy44tAIJYacD39G83lkr7
#   Z1A/fIARLLFEWdrR870FUpU/b1VTaUSyG6Wa32O9H7JGUen1xzTlV2rSFOrpAMM0
#   KLzzvGc8JMWyHEwOrchmxmNFbJOZdcy+BVgxQt/alilC05y9qPIGkWLWItl+sLG6
#   kjyYH9axd0bOgmV6JzLFLleEjxqWN8Aim/QnL3sHqPbuf/bGErGQhhG1J+9weHay
#   /G6lEjgGlC63gOxWO/TsXOZYqO6z7H8Uwgg+ZQIBIwKCAQAqQLPpyHyjMNbUYkQQ
#   tG2siQNng5JcNwgjenHtt2ASDZ15ufIQkL8QtryHkSWXRD5Q43/j3EYhzuQjCw7L
#   gF6sIk/Nh5KiDp3bjztOZNILp5Hzcl3nXccupJazuI3rOESdwuQcjMcrQdOeueSo
#   BgNAweAsuNBA8wSvkUJJrcD+EBt2OUBFI7mUzNscdoUydt8wJFdb09NHNRe7qy44
#   fCq8AS3/T0cQLs3C2V+bYld5ScTQmmizly3IjvnY6iNxgP0Q+oUtZismZR7ubUYO
#   quZpnI/uMpWAFeRKIsTa5u3GLTEqkegWfaFFUdaZs10yvpmSp/A29OUrg8tpZQj+
#   nSHrAoGBANcBhmSio9TT/9wBHwrJ1ZWy5nWHvOo5kmduP2faSmKTlEHwKw2gnWcL
#   7ux7Sli2+wbp4n51fuBoshjw21cZJGBlqSCf2I2KRuQlKOliO2meqU+DsRpAuNcD
#   98fYAqdZxD0+Dr4vBz+49t0FiyAt4hqy31ATws4dR/EYYqh0VPWZAoGBAMOlQbkj
#   44YXg5pDLxMcb03qVJ2ENbPIwPItur7dnLa3uMlTWCDXnqg1fN8rmgzNFOwpzBa3
#   qrBV3CI63O2TZ+xGnvP6Y2uoZuRzYAxWA69LcN2/1nJpk3dDwMsh4lSvCazqMIqu
#   1CsSygNxzZ6qJQLAiIRW+WSpicg6PizhUDatAoGAaG50egXai/HxTZolBT12XqdZ
#   /pJjEq4/y9Z2kYdIs4mChm1WvXnmDXrTImfFBoTDEfySlTHBSG1d0ZmPG60gTBQe
#   8pbIRL+BhMGXh0z4ST5vfmSJOKMX82hTx3eMQqfxmhbT9fmVzn5pRsgtoepmgf8c
#   AlK9tJHhHVT8uDiBCZMCgYBkniHM7eK5/XbhnuUCg6b03umwGBueSfzUUghE5wAj
#   dG2pXhAQ4+sx759OM65Pue2AxQnfzCvlqH/XFvVG+1oEfBc7pVeztbFCSfbhxdYC
#   YU/9A5LbwUSGep2qS/C91ly/U95zNVcsGEqir45RmVTc2AuxxlRfp6Xx8hFY6Ods
#   kwKBgDpQO7jQEzp6ex6aH54Q7JPBWzRWlDeT91SDxxgRj/fn7F3an2H6pfou2y3Y
#   jcArRECuhz7ckxtmTyG4JXxxPtJ6mso7jYToRymeOvzK9OhzQoMu2Wvke1B+TCH2
#   KHdH+0DM6qjZcS8d1MfNVEtwOW7Iy3+VsiGE0qNATAN6FvHp
#   -----END RSA PRIVATE KEY-----

# ora_rac::params::oracle_private_key: |
#   -----BEGIN RSA PRIVATE KEY-----
#   MIIEoQIBAAKCAQEAq1hhJJQu4NC9LxEz/lWczzC2cQUJZNt+Cgj5RAteGG2Me1sN
#   2hQI7mMWu/vVWYXpG5pgOVyv3IPkApfC5tXqHcygvWhKbyvo3mWn2I9wvSL4f2gs
#   v/RKgdP50lfgNxOemrIfrz08A16AloHcYS/titxZkJGNqkzg6XrM3EslzRvMWXFu
#   t1ACYzj8YQwLtzzmJJUrn0/YnEctA/6Jrl5U+kUlt/kpO6WxHoPxGruAnFGnNTM2
#   WobUSpculzuT3qwAfQXayK6v4/SwPzmye4/4F08dgEO1z6aAp1kLSkQnib+O3Wkm
#   luDyKtRmhrpZDjZf1bsZ5OKidSmiEDUa+N9dKQIBIwKCAQEApnMcie8I96Y0HxgG
#   n0vaKFs04tGxWqlV3dzU4wO6fiFGo7eJzIh9tGBB+HD7I8Ppwwr+Y5veCWot8+Ph
#   5435XsbICHPwiUCZEo6jDOMdD4EOp6cG5lsGjL9KdI/hH49m32s0uNxmLyiaK86b
#   kZxF11m2F2jSwrEVABDkQ7a3AcGkZFDzchvOKwKwnjaibOHx+cMNDnjE4t3hElAc
#   8a7jVuZn+Uh/9z0LrS1aLrG7dXPVb3lw8AGNxajddARcyYt+UkAjl1SVqW9N+HQo
#   AlATzjF8Rw0EJ7PP7NoRwYAUbB/Sux/40oZtTSPBvB0hADk0MLbV+XoJXanlQPWH
#   swDCQwKBgQDYvWV4ZCj4MLZZvnJpmGDnOCdgpcQy93xKxYsqQdZU0Fq0nnDezoX9
#   d6mdVPAqtfl8mD46srhfA3wIaKtKsnrNXZ5PpmeY6WMPkOXX4EQQyRNweiqQ0soq
#   rlYW+P35x7vKdiwJ/PBE46mmTlJMV9PZA08ru3FvgCT7aGpS+5Mo/wKBgQDKYfTd
#   mexMjcOhh0NGNk3CEPfUH1qeu0DU59Wb+0To9htga72olEK+OFjRSm66kxWhuUND
#   oa69sFa6r5ramPRtUkOiuzPINY/9l/pmIHHxCQi8Jl6RptBpWARago2gQ6bF08lg
#   ObGXHWfTI++2CPp2vmRsPzdWfgLvXWSeLnER1wKBgDe7rGDJTF0T1x5kLAyGRM29
#   +39AkYly1tFl/zbAePE85B/Q+HPOtL2FK518PcHXBaOyHqFhKBhunDytM1xZx85o
#   h8tWrOzOTKw7M8nL9D7UnplD/FEgQp1Cxa4ixPcWGliiC1MGhu0kmVambO8PRRqL
#   0oeWmYMSUqcMOJj+3LLFAoGAFyEjTIaeqanNNwgk8hTVr8dsx8kRq72hAmOjYkia
#   KUCyq+8OXGi3K66rEJrK036GIRx8t0WtkgWGQTij+7m1iNYznZG8xmyFfBFechJW
#   KizrDjBFUnl253fF+7cmIPHJ6rkeVCPZyCCeJsJHSAEGrnwou+n3sh0HplPQ/CKQ
#   lFMCgYBDeJ5G8jK91j0QuGI2Zssb2BSVskmQB7PxXLS+yTX0iSv5+1r6g36aOuhV
#   3Blzac4mb7bxp5591RZtKmG3GQBFIWY4SgnDhN87XrE+ijk70w9uReWLs7dQyFR8
#   sn+CjHQaNH8HU3zQg4KAUs/ENmYemjFipjE+sTJ7SltWbp+oRA==
#   -----END RSA PRIVATE KEY-----
